trigger:
  branches:
    include:
    - master
  steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '10.x'
    displayName: 'Install Node.js'

  - script: |
      npm install
      npm run build --if-present
      npm test
    displayName: 'npm install, build, test'

  - script: npm pack
    displayName: 'npm pack'

  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(System.DefaultWorkingDirectory)'
